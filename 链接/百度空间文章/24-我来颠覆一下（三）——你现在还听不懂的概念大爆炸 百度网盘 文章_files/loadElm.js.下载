/*! 3475 2013-9-17 14:8:14 */
define(function(){var e=function(t,n){t=t||document;var i=t.getElementsByTagName("*"),o={node:{},nodes:{}};return e.parseElmIntoObj(o,t),e.forEach(i,function(t){e.parseElmIntoObj(o,t)}),n&&(n.node=o.node,n.nodes=o.nodes),o};return e.forEach=function(e,t){if(e){var n,i;for(n=0,i=e.length;i>n;++n)t(e[n],n)}},e.parseElmIntoObj=function(t,n){if(1===n.nodeType){var i=/\b_([\w\d]+)\b/g,o=n.className.match(i),r=n.getAttribute("id");if(r){if(t.node[r])throw new Error("loadElm error, id标记重复,多节点标记请用单下划线打头！: '#"+r+"'");t.node[r]=n}e.forEach(o,function(i){e.parseClassIntoObj(t,i,n)})}},e.parseClassIntoObj=function(e,t,n){var i;if("__"===t.substr(0,2)){if(i=t.slice(2),e.node[i]&&e.node[i]!==n)throw new Error("loadElm error, 多节点标记请用单下划线打头！: '"+t+"'");e.node[i]=n}else e.nodes[t.slice(1)]||(e.nodes[t.slice(1)]=[]),e.nodes[t.slice(1)].push(n)},e});