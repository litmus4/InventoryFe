/*! 5021 2013-11-15 18:39:36 */
define(["lib/jquery/1_9","comp/conf"],function(t,a){var n=function(t,a){var e={},s=function(){a=a||{},a.dailog=a.dailog||{alert:function(t){alert(t)}};var s;for(s in t)e[s]=n.buildM(t[s],a)};return s(),e};return n.buildM=function(n,e){var s,o=function(t){e.dailog.alert(t.msg)};switch(n.type){case"get":case"post":s={type:n.type,dataType:"json"};break;case"jsonp":return function(t){s={type:"jsonp",crossDomain:!0,dataType:"jsonp",jsonpCallback:t.jsonpCallback}}}return function(e){var r=0,u=t.extend(s,e);u.url=n.uri,u.data=e.data,u.cache=!1,u.success=function(n){var s,i=function(){e.bad&&(s=e.bad.apply(this,arguments)===!1?!1:s),s!==!1&&o.apply(this,arguments)};n.status>0||0===n.status?e.ok&&e.ok.apply(this,arguments):-35026===n.status?(o.apply(this,arguments),s=!1,open(a.yunUrl+"/buy/center","buy_center","alwaysRaised=yes,height=600,width=900")):-35006===n.status&&2>r?t.ajax({url:a.baseUrl+"/getbdstoken?t="+ +new Date+"_"+Math.round(1e6*Math.random()),success:function(a){r++,a.status>=0?(u.data.bdstoken=a.data.bdstoken,t.ajax(u)):i(a)}}):i(n),e.end&&e.end.apply(this,arguments)},u.error=e.error,u.complete=e.end,u.timeout=e.timeout,t.ajax(u)}},n});